Author: Rog√©rio Brito <rbrito@ime.usp.br>
Description:
  Fix the installation of the HFS wrapper block to be compliant in Linux
  systems (since it is arch independent).
--- a/newfs_hfs.tproj/makehfs.c
+++ b/newfs_hfs.tproj/makehfs.c
@@ -69,17 +69,17 @@
 #include <TargetConditionals.h>
 
 extern Boolean _CFStringGetFileSystemRepresentation(CFStringRef string, UInt8 *buffer, CFIndex maxBufLen);
+#endif
 
 #include <hfs/hfs_format.h>
 #include <hfs/hfs_mount.h>
 #include "hfs_endian.h"
-#endif
 
 #include "newfs_hfs.h"
 #include "readme.h"
 
 
-#define HFS_BOOT_DATA	"/usr/share/misc/hfsbootdata"
+#define HFS_BOOT_DATA	"/usr/share/hfsprogs/hfsbootdata"
 
 #define HFS_JOURNAL_FILE	".journal"
 #define HFS_JOURNAL_INFO	".journal_info_block"
@@ -177,6 +177,7 @@
 #if LINUX
 #define ENCODING_TO_BIT(e)       (e)
 #endif
+#if !LINUX
 #if TARGET_OS_EMBEDDED
 #define ENCODING_TO_BIT(e)				 \
 	  ((e) < 48 ? (e) : 0)
@@ -186,6 +187,7 @@
           ((e) == kCFStringEncodingMacUkrainian ? 48 :   \
           ((e) == kCFStringEncodingMacFarsi ? 49 : 0)))
 #endif
+#endif
 
 /*
  * make_hfs
