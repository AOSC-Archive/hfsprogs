Author: Rog√©rio Brito <rbrito@ime.usp.br>
Description:
  Create a new command line option (-a) for the fsck.hfsplus that has the same
  behavior that the -p option has, for greater compatibility with other tools.
--- a/fsck_hfs.tproj/fsck_hfs.c
+++ b/fsck_hfs.tproj/fsck_hfs.c
@@ -104,7 +104,7 @@
 	else
 		progname = *argv;
 
-	while ((ch = getopt(argc, argv, "c:D:dfglm:npqruy")) != EOF) {
+	while ((ch = getopt(argc, argv, "c:D:dfglm:napqruy")) != EOF) {
 		switch (ch) {
 		case 'c':
 			/* Cache size to use in fsck_hfs */
@@ -169,6 +169,7 @@
 			yflag = 0;
 			break;
 
+		case 'a':
 		case 'p':
 			preen++;
 			break;
@@ -596,7 +597,7 @@
 	(void) fplog(stderr, "  l = live fsck (lock down and test-only)\n");
 	(void) fplog(stderr, "  m arg = octal mode used when creating lost+found directory \n");
 	(void) fplog(stderr, "  n = assume a no response \n");
-	(void) fplog(stderr, "  p = just fix normal inconsistencies \n");
+	(void) fplog(stderr, "  p, a = just fix normal inconsistencies \n");
 	(void) fplog(stderr, "  q = quick check returns clean, dirty, or failure \n");
 	(void) fplog(stderr, "  r = rebuild catalog btree \n");
 	(void) fplog(stderr, "  u = usage \n");
